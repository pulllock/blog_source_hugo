---
title: JVM中的程序计数器
date: 2017-07-16 15:40:55
categories: 
- JVM
tags:
- JVM
---

JVM中的程序计数器学习。

<!--more-->

Java虚拟机支持多线程同时执行，每个线程都有自己的程序计数器Progrom Counter Register，任意时刻一个线程只会执行一个方法的代码，程序计数器会保存正在执行的字节码指令的地址，如果方法是native的，程序计数器的值是undefined。

PC寄存器的容量至少应当能保存一个returnAddress类型的数据或者一个与平台相关的本地指针的值。

JVM的多线程是通过线程切换来实现，同一时刻在同一个cpu上只会执行一个线程中的指令，当当前线程被切换出去后，执行另外的线程，就需要在程序计数器中记录当前线程执行到了哪个字节码指令，后面再切换会这个线程的时候，就可以继续按照程序计数器中记录的字节码指令执行下去。

native方法不是由JVM执行，所以没有JVM中定义的程序计数器。

在Java虚拟机的概念模型里，字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，它是程序控制流的指示器，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。