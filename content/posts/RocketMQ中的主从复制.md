---
title: RocketMQ中的主从复制
date: 2018-01-20 15:30:51
categories: 
- MQ
tags:
- RocketMQ
---

RocketMQ的主从复制学习。

<!--more-->

为提高消息消费的高可用，避免Broker单点故障引起消息无法及时消费，RocketMQ采用Broker主备机制，消息到到主服务器后需要将消息同步到从服务器。

HA实现原理：

- 主服务器启动，在特定端口上监听从服务器连接
- 从服务器主动连接主服务器，主服务器接收客户端的连接，建立TCP连接
- 从服务器主动向主服务器发送待拉取消息偏移量，主服务器解析请求并返回消息给从服务器
- 从服务器保存消息并继续发送信息的消息同步请求

