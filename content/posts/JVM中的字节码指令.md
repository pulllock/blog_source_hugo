---
title: JVM中的字节码指令
date: 2017-08-19 21:29:52
categories: 
- JVM
tags:
- JVM
---

JVM中的字节码指令学习。

<!--more-->

JVM采用面向操作数栈而不是面向寄存器的架构，所以大多数指令都不包含操作数，只包含一个操作码，指令参数都放在操作数栈中。

大部分与数据类型相关的字节码指令，操作码助记符都有特殊字符来表明为哪种数据类型服务：

- i表示int类型
- l表示long
- s表示short
- b表示byte
- c表示char
- f表示float
- d表示double
- a表示reference

![字节码指令-1](/JVM中的字节码指令/字节码指令-1.png)

![字节码指令-2](/JVM中的字节码指令/字节码指令-2.png)

大部分指令没有支持整数型byte、char、short，没有任何指令支持boolean类型。是因为编译器在编译期或者运行期时：

- 将byte和short类型数据带符号扩展为相应int类型数据
- 将boolean和char类型数据零位扩展为相应int类型数据

# 加载指令

加载用于将数据从局部变量表加载到操作数栈中。

## 将一个局部变量加载到操作数栈

| 字节码 | 助记符  | 含义                        |
| ------ | ------- | --------------------------- |
| 0x15   | iload   | 将指定的int型变量推送到栈顶 |
| 0x1a   | iload_0 | 将第一个int型变量推送到栈顶 |
| 0x1b   | iload_1 | 将第二个int型变量推送到栈顶 |
| 0x1c   | iload_2 | 将第三个int型变量推送到栈顶 |
| 0x1d   | iload_3 | 将第四个int型变量推送到栈顶 |

| 字节码 | 助记符  | 含义                         |
| ------ | ------- | ---------------------------- |
| 0x16   | lload   | 将指定的long型变量推送到栈顶 |
| 0x1e   | lload_0 | 将第一个long型变量推送到栈顶 |
| 0x1f   | lload_1 | 将第二个long型变量推送到栈顶 |
| 0x20   | lload_2 | 将第三个long型变量推送到栈顶 |
| 0x21   | lload_3 | 将第四个long型变量推送到栈顶 |

| 字节码 | 助记符  | 含义                          |
| ------ | ------- | ----------------------------- |
| 0x17   | fload   | 将指定的fload型变量推送到栈顶 |
| 0x22   | fload_0 | 将第一个fload型变量推送到栈顶 |
| 0x23   | fload_1 | 将第二个fload型变量推送到栈顶 |
| 0x24   | fload_2 | 将第三个fload型变量推送到栈顶 |
| 0x25   | fload_3 | 将第四个fload型变量推送到栈顶 |

| 字节码 | 助记符  | 含义                           |
| ------ | ------- | ------------------------------ |
| 0x18   | dload   | 将指定的double型变量推送到栈顶 |
| 0x26   | dload_0 | 将第一个double型变量推送到栈顶 |
| 0x27   | dload_1 | 将第二个double型变量推送到栈顶 |
| 0x28   | dload_2 | 将第三个double型变量推送到栈顶 |
| 0x29   | dload_3 | 将第四个double型变量推送到栈顶 |

| 字节码 | 助记符  | 含义                           |
| ------ | ------- | ------------------------------ |
| 0x19   | aload   | 将指定的引用类型变量推送到栈顶 |
| 0x2a   | aload_0 | 将第一个引用类型变量推送到栈顶 |
| 0x2b   | aload_1 | 将第二个引用类型变量推送到栈顶 |
| 0x2c   | aload_2 | 将第三个引用类型变量推送到栈顶 |
| 0x2d   | aload_3 | 将第四个引用类型变量推送到栈顶 |

| 字节码 | 助记符 | 含义                                        |
| ------ | ------ | ------------------------------------------- |
| 0x2e   | iaload | 将int型数组指定索引的值推送至栈顶           |
| 0x2f   | laload | 将long型数组指定索引的值推送至栈顶          |
| 0x30   | faload | 将float型数组指定索引的值推送至栈顶         |
| 0x31   | daload | 将double型数组指定索引的值推送至栈顶        |
| 0x32   | aaload | 将引用类型数组指定索引的值推送至栈顶        |
| 0x33   | baload | 将boolean或byte型数组指定索引的值推送至栈顶 |
| 0x34   | caload | 将char型数组指定索引的值推送至栈顶          |
| 0x35   | saload | 将short型数组指定索引的值推送至栈顶         |

## 将一个常量加载到操作数栈

| 字节码 | 助记符      | 含义             |
| ------ | ----------- | ---------------- |
| 0x01   | aconst_null | 将null推送至栈顶 |


| 字节码 | 助记符    | 含义                    |
| ------ | --------- | ----------------------- |
| 0x02   | iconst_m1 | 将int型常量-1推送至栈顶 |
| 0x03   | iconst_0  | 将int型常量0推送至栈顶  |
| 0x04   | iconst_1  | 将int型常量1推送至栈顶  |
| 0x05   | iconst_2  | 将int型常量2推送至栈顶  |
| 0x06   | iconst_3  | 将int型常量3推送至栈顶  |
| 0x07   | iconst_4  | 将int型常量4推送至栈顶  |
| 0x08   | iconst_5  | 将int型常量5推送至栈顶  |


| 字节码 | 助记符   | 含义                                     |
| ------ | -------- | ---------------------------------------- |
| 0x09   | lconst_0 | 将long型常量0推送至栈顶                  |
| 0x0a   | lconst_1 | 将long型常量1推送至栈顶                  |


| 字节码 | 助记符   | 含义                                     |
| ------ | -------- | ---------------------------------------- |
| 0x0b   | fconst_0 | 将float型常量0推送至栈顶                 |
| 0x0c   | fconst_1 | 将float型常量1推送至栈顶                 |
| 0x0d   | fconst_2 | 将float型常量2推送至栈顶                 |

| 字节码 | 助记符   | 含义                      |
| ------ | -------- | ------------------------- |
| 0x0e   | dconst_0 | 将double型常量0推送至栈顶 |
| 0x0f   | dconst_1 | 将double型常量1推送至栈顶 |

| 字节码 | 助记符 | 含义                                      |
| ------ | ------ | ----------------------------------------- |
| 0x10   | bipush | 将byte型常量值(-128~127)推送至栈顶        |
| 0x11   | sipush | 将一个short型常量(-32768~32767)推送至栈顶 |

## 将一个常量从常量池加载到操作数栈

| 字节码 | 助记符 | 含义                                                    |
| ------ | ------ | ------------------------------------------------------- |
| 0x12   | ldc    | 将int,float或String型常量值从常量池中推送至栈顶         |
| 0x13   | ldc_w  | 将int,float或String型常量值从常量池中推送至栈顶(宽索引) |
| 0x14   | ldc2_w | 将long或double型常量值从常量池中推送至栈顶(宽索引)      |

# 存储指令

存储用于将数据从操作数栈存储到局部变量表中。

| 字节码 | 助记符   | 含义                              |
| ------ | -------- | --------------------------------- |
| 0x36   | istore   | 将栈顶int型数值存入指定局部变量   |
| 0x3b   | istore_0 | 将栈顶int型数值存入第一个局部变量 |
| 0x3c   | istore_1 | 将栈顶int型数值存入第二个局部变量 |
| 0x3d   | istore_2 | 将栈顶int型数值存入第三个局部变量 |
| 0x3e   | istore_3 | 将栈顶int型数值存入第四个局部变量 |

| 字节码 | 助记符   | 含义                               |
| ------ | -------- | ---------------------------------- |
| 0x37   | lstore   | 将栈顶long型数值存入指定局部变量   |
| 0x3f   | lstore_0 | 将栈顶long型数值存入第一个局部变量 |
| 0x40   | lstore_1 | 将栈顶long型数值存入第二个局部变量 |
| 0x41   | lstore_2 | 将栈顶long型数值存入第三个局部变量 |
| 0x42   | lstore_3 | 将栈顶long型数值存入第四个局部变量 |

| 字节码 | 助记符   | 含义                                |
| ------ | -------- | ----------------------------------- |
| 0x38   | fstore   | 将栈顶float型数值存入指定局部变量   |
| 0x43   | fstore_0 | 将栈顶float型数值存入第一个局部变量 |
| 0x44   | fstore_1 | 将栈顶float型数值存入第二个局部变量 |
| 0x45   | fstore_2 | 将栈顶float型数值存入第三个局部变量 |
| 0x46   | fstore_3 | 将栈顶float型数值存入第四个局部变量 |

| 字节码 | 助记符   | 含义                                 |
| ------ | -------- | ------------------------------------ |
| 0x39   | dstore   | 将栈顶double型数值存入指定局部变量   |
| 0x47   | dstore_0 | 将栈顶double型数值存入第一个局部变量 |
| 0x48   | dstore_1 | 将栈顶double型数值存入第二个局部变量 |
| 0x49   | dstore_2 | 将栈顶double型数值存入第三个局部变量 |
| 0x4a   | dstore_3 | 将栈顶double型数值存入第四个局部变量 |

| 字节码 | 助记符   | 含义                               |
| ------ | -------- | ---------------------------------- |
| 0x3a   | astore   | 将栈顶引用类型数值存入指定局部变量 |
| 0x4b   | astore_0 | 将栈顶引用型数值存入第一个局部变量 |
| 0x4c   | astore_1 | 将栈顶引用型数值存入第二个局部变量 |
| 0x4d   | astore_2 | 将栈顶引用型数值存入第三个局部变量 |
| 0x4e   | astore_3 | 将栈顶引用型数值存入第四个局部变量 |

| 字节码 | 助记符  | 含义                                                |
| ------ | ------- | --------------------------------------------------- |
| 0x4f   | iastore | 将栈顶int型数值存入指定数组的指定索引位置           |
| 0x50   | lastore | 将栈顶long型数值存入指定数组的指定索引位置          |
| 0x51   | fastore | 将栈顶float型数值存入指定数组的指定索引位置         |
| 0x52   | dastore | 将栈顶double型数值存入指定数组的指定索引位置        |
| 0x53   | aastore | 将栈顶引用型数值存入指定数组的指定索引位置          |
| 0x54   | bastore | 将栈顶boolean或byte型数值存入指定数组的指定索引位置 |
| 0x55   | castore | 将栈顶char型数值存入指定数组的指定索引位置          |
| 0x56   | sastore | 将栈顶short型数值存入指定数组的指定索引位置         |

# 运算指令

运算指令用于对两个操作数栈上的值进行某种特定运算，并把结果重新存到操作数栈顶。

## 加法指令

| 字节码 | 助记符 | 含义                                     |
| ------ | ------ | ---------------------------------------- |
| 0x60   | iadd   | 将栈顶两int型数值相加并将结果压入栈顶    |
| 0x61   | ladd   | 将栈顶两long型数值相加并将结果压入栈顶   |
| 0x62   | fadd   | 将栈顶两float型数值相加并将结果压入栈顶  |
| 0x63   | dadd   | 将栈顶两double型数值相加并将结果压入栈顶 |

## 减法指令

| 字节码 | 助记符 | 含义                                     |
| ------ | ------ | ---------------------------------------- |
| 0x64   | isub   | 将栈顶两int型数值相减并将结果压入栈顶    |
| 0x65   | lsub   | 将栈顶两long型数值相减并将结果压入栈顶   |
| 0x66   | fsub   | 将栈顶两float型数值相减并将结果压入栈顶  |
| 0x67   | dsub   | 将栈顶两double型数值相减并将结果压入栈顶 |

## 乘法指令

| 字节码 | 助记符 | 含义                                     |
| ------ | ------ | ---------------------------------------- |
| 0x68   | imul   | 将栈顶两int型数值相乘并将结果压入栈顶    |
| 0x69   | lmul   | 将栈顶两long型数值相乘并将结果压入栈顶   |
| 0x6a   | fmul   | 将栈顶两float型数值相乘并将结果压入栈顶  |
| 0x6b   | dmul   | 将栈顶两double型数值相乘并将结果压入栈顶 |

## 除法指令

| 字节码 | 助记符 | 含义                                     |
| ------ | ------ | ---------------------------------------- |
| 0x6c   | idiv   | 将栈顶两int型数值相除并将结果压入栈顶    |
| 0x6d   | ldiv   | 将栈顶两long型数值相除并将结果压入栈顶   |
| 0x6e   | fdiv   | 将栈顶两float型数值相除并将结果压入栈顶  |
| 0x6f   | ddiv   | 将栈顶两double型数值相除并将结果压入栈顶 |

## 取模运算指令

| 字节码 | 助记符 | 含义                                           |
| ------ | ------ | ---------------------------------------------- |
| 0x70   | irem   | 将栈顶两int型数值作取模运算并将结果压入栈顶    |
| 0x71   | lrem   | 将栈顶两long型数值作取模运算并将结果压入栈顶   |
| 0x72   | frem   | 将栈顶两float型数值作取模运算并将结果压入栈顶  |
| 0x73   | drem   | 将栈顶两double型数值作取模运算并将结果压入栈顶 |

## 取反运算指令

| 字节码 | 助记符 | 含义                                   |
| ------ | ------ | -------------------------------------- |
| 0x74   | ineg   | 将栈顶int型数值取负并将结果压入栈顶    |
| 0x75   | lneg   | 将栈顶long型数值取负并将结果压入栈顶   |
| 0x76   | fneg   | 将栈顶float型数值取负并将结果压入栈顶  |
| 0x77   | dneg   | 将栈顶double型数值取负并将结果压入栈顶 |

## 位移指令

| 字节码 | 助记符 | 含义                                             |
| ------ | ------ | ------------------------------------------------ |
| 0x78   | ishl   | 将int型数值左移指定位数并将结果压入栈顶          |
| 0x79   | lshl   | 将long型数值左移指定位数并将结果压入栈顶         |
| 0x7a   | ishr   | 将int型数值右(带符号)移指定位数并将结果压入栈顶  |
| 0x7b   | lshr   | 将long型数值右(带符号)移指定位数并将结果压入栈顶 |
| 0x7c   | iushr  | 将int型数值右(无符号)移指定位数并将结果压入栈顶  |
| 0x7d   | lushr  | 将long型数值右(无符号)移指定位数并将结果压入栈顶 |

## 按位与指令

| 字节码 | 助记符 | 含义                                       |
| ------ | ------ | ------------------------------------------ |
| 0x7e   | iand   | 将栈顶两int型数值"按位与"并将结果压入栈顶  |
| 0x7f   | land   | 将栈顶两long型数值"按位与"并将结果压入栈顶 |

## 按位或指令

| 字节码 | 助记符 | 含义                                       |
| ------ | ------ | ------------------------------------------ |
| 0x80   | ior    | 将栈顶两int型数值"按位或"并将结果压入栈顶  |
| 0x81   | lor    | 将栈顶两long型数值"按位或"并将结果压入栈顶 |

## 按位异或指令

| 字节码 | 助记符 | 含义                                         |
| ------ | ------ | -------------------------------------------- |
| 0x82   | ixor   | 将栈顶两int型数值"按位异或"并将结果压入栈顶  |
| 0x83   | lxor   | 将栈顶两long型数值"按位异或"并将结果压入栈顶 |

## 局部变量自增指令

| 字节码 | 助记符 | 含义                                          |
| ------ | ------ | --------------------------------------------- |
| 0x84   | iinc   | 将指定int型变量增加指定值(如i++, i--, i+=2等) |

## 比较指令

| 字节码 | 助记符 | 含义                                                         |
| ------ | ------ | ------------------------------------------------------------ |
| 0x94   | lcmp   | 比较栈顶两long型数值大小并将结果(1, 0或-1)压入栈顶           |
| 0x95   | fcmpl  | 比较栈顶两float型数值大小并将结果(1, 0或-1)压入栈顶; 当其中一个数值为NaN时, 将-1压入栈顶 |
| 0x96   | fcmpg  | 比较栈顶两float型数值大小并将结果(1, 0或-1)压入栈顶; 当其中一个数值为NaN时, 将1压入栈顶 |
| 0x97   | dcmpl  | 比较栈顶两double型数值大小并将结果(1, 0或-1)压入栈顶; 当其中一个数值为NaN时, 将-1压入栈顶 |
| 0x98   | dcmpg  | 比较栈顶两double型数值大小并将结果(1, 0或-1)压入栈顶; 当其中一个数值为NaN时, 将1压入栈顶 |

# 类型转换指令

类型转换指令可以将两种不同数值类型相互转换。

- 宽化类型转换，JVM直接支持小范围到大范围类型的安全转换，无需显式使用转换指令
- 窄化类型转换，JVM在处理大范围类型到小范围类型的转换时，需要显式的使用转换指令。窄化类型转换可能导致结果产生不同的正负号、不同数量级，数值的精度也可能会丢失；int或long类型窄化转换时，仅仅是简单丢弃最低位N字节以外的内容，可能会导致转换结果与输入值有不同的正负号。

| 字节码 | 助记符 | 含义                                                  |
| ------ | ------ | ----------------------------------------------------- |
| 0x85   | i2l    | 将栈顶int型数值强制转换为long型数值并将结果压入栈顶   |
| 0x86   | i2f    | 将栈顶int型数值强制转换为float型数值并将结果压入栈顶  |
| 0x87   | i2d    | 将栈顶int型数值强制转换为double型数值并将结果压入栈顶 |
| 0x91   | i2b    | 将栈顶int型数值强制转换为byte型数值并将结果压入栈顶   |
| 0x92   | i2c    | 将栈顶int型数值强制转换为char型数值并将结果压入栈顶   |
| 0x93   | i2s    | 将栈顶int型数值强制转换为short型数值并将结果压入栈顶  |

| 字节码 | 助记符 | 含义                                                   |
| ------ | ------ | ------------------------------------------------------ |
| 0x88   | l2i    | 将栈顶long型数值强制转换为int型数值并将结果压入栈顶    |
| 0x89   | l2f    | 将栈顶long型数值强制转换为float型数值并将结果压入栈顶  |
| 0x8a   | l2d    | 将栈顶long型数值强制转换为double型数值并将结果压入栈顶 |

| 字节码 | 助记符 | 含义                                                    |
| ------ | ------ | ------------------------------------------------------- |
| 0x8b   | f2i    | 将栈顶float型数值强制转换为int型数值并将结果压入栈顶    |
| 0x8c   | f2l    | 将栈顶float型数值强制转换为long型数值并将结果压入栈顶   |
| 0x8d   | f2d    | 将栈顶float型数值强制转换为double型数值并将结果压入栈顶 |

| 字节码 | 助记符 | 含义                                                    |
| ------ | ------ | ------------------------------------------------------- |
| 0x8e   | d2i    | 将栈顶double型数值强制转换为int型数值并将结果压入栈顶   |
| 0x8f   | d2l    | 将栈顶double型数值强制转换为long型数值并将结果压入栈顶  |
| 0x90   | d2f    | 将栈顶double型数值强制转换为float型数值并将结果压入栈顶 |

# 对象创建与访问指令

# 对象和数组创建

| 字节码 | 助记符 | 含义                                   |
| ------ | ------ | -------------------------------------- |
| 0xbb   | new    | 创建一个对象, 并将其引用引用值压入栈顶 |

| 字节码 | 助记符    | 含义                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| 0xbc   | newarray  | 创建一个指定的原始类型(如int, float, char等)的数组, 并将其引用值压入栈顶 |
| 0xbd   | anewarray | 创建一个引用型(如类, 接口, 数组)的数组, 并将其引用值压入栈顶 |

| 字节码 | 助记符         | 含义                                                         |
| ------ | -------------- | ------------------------------------------------------------ |
| 0xc5   | multianewarray | 创建指定类型和指定维度的多维数组(执行该指令时, 操作栈中必须包含各维度的长度值), 并将其引用压入栈顶 |

## 访问指令

| 字节码 | 助记符    | 含义                               |
| ------ | --------- | ---------------------------------- |
| 0xb2   | getstatic | 获取指定类的静态域, 并将其压入栈顶 |
| 0xb3   | putstatic | 为指定类的静态域赋值               |
| 0xb4   | getfield  | 获取指定类的实例域, 并将其压入栈顶 |
| 0xb5   | putfield  | 为指定类的实例域赋值               |

## 取数组长度指令

| 字节码 | 助记符      | 含义                       |
| ------ | ----------- | -------------------------- |
| 0xbe   | arraylength | 获取数组的长度值并压入栈顶 |
|        |             |                            |

## 检查类实例类型的指令

| 字节码 | 助记符     | 含义                                                         |
| ------ | ---------- | ------------------------------------------------------------ |
| 0xc0   | checkcast  | 检验类型转换, 检验未通过将抛出 ClassCastException            |
| 0xc1   | instanceof | 检验对象是否是指定类的实际, 如果是将1压入栈顶, 否则将0压入栈顶 |

# 操作数栈管理指令

直接操作操作数栈的指令

| 字节码 | 助记符  | 含义                                                         |
| ------ | ------- | ------------------------------------------------------------ |
| 0x57   | pop     | 将栈顶数值弹出(数值不能是long或double类型的)                 |
| 0x58   | pop2    | 将栈顶的一个(对于非long或double类型)或两个数值(对于非long或double的其他类型)弹出 |
| 0x59   | dup     | 复制栈顶数值并将复制值压入栈顶                               |
| 0x5a   | dup_x1  | 复制栈顶数值并将两个复制值压入栈顶                           |
| 0x5b   | dup_x2  | 复制栈顶数值并将三个(或两个)复制值压入栈顶                   |
| 0x5c   | dup2    | 复制栈顶一个(对于long或double类型)或两个(对于非long或double的其他类型)数值并将复制值压入栈顶 |
| 0x5d   | dup2_x1 | dup_x1指令的双倍版本                                         |
| 0x5e   | dup2_x2 | dup_x2指令的双倍版本                                         |
| 0x5f   | swap    | 将栈顶最顶端的两个数值互换(数值不能是long或double类型)       |

# 控制转移指令

控制转移指令可以让JVM有条件或无条件的从指定位置指令的下一条指令继续执行程序，可认为控制指令就是在有条件或者无条件的修改PC寄存器的值。

## 条件分支

| 字节码 | 助记符    | 含义                                           |
| ------ | --------- | ---------------------------------------------- |
| 0x99   | ifeq      | 当栈顶int型数值等于0时跳转                     |
| 0x9a   | ifne      | 当栈顶int型数值不等于0时跳转                   |
| 0x9b   | iflt      | 当栈顶int型数值小于0时跳转                     |
| 0x9c   | ifge      | 当栈顶int型数值大于等于0时跳转                 |
| 0x9d   | ifgt      | 当栈顶int型数值大于0时跳转                     |
| 0x9e   | ifle      | 当栈顶int型数值小于等于0时跳转                 |
| 0x9f   | if_icmpeq | 比较栈顶两int型数值大小, 当结果等于0时跳转     |
| 0xa0   | if_icmpne | 比较栈顶两int型数值大小, 当结果不等于0时跳转   |
| 0xa1   | if_icmplt | 比较栈顶两int型数值大小, 当结果小于0时跳转     |
| 0xa2   | if_icmpge | 比较栈顶两int型数值大小, 当结果大于等于0时跳转 |
| 0xa3   | if_icmpgt | 比较栈顶两int型数值大小, 当结果大于0时跳转     |
| 0xa4   | if_icmple | 比较栈顶两int型数值大小, 当结果小于等于0时跳转 |
| 0xa5   | if_acmpeq | 比较栈顶两引用型数值, 当结果相等时跳转         |
| 0xa6   | if_acmpne | 比较栈顶两引用型数值, 当结果不相等时跳转       |

## 复合条件分支

| 字节码 | 助记符       | 含义                                           |
| ------ | ------------ | ---------------------------------------------- |
| 0xaa   | tableswitch  | 用于switch条件跳转, case值连续(可变长度指令)   |
| 0xab   | lookupswitch | 用于switch条件跳转, case值不连续(可变长度指令) |

## 无条件分支

| 字节码 | 助记符 | 含义                                                         |
| ------ | ------ | ------------------------------------------------------------ |
| 0xa7   | goto   | 无条件跳转                                                   |
| 0xa8   | jsr    | 跳转至指定的16位offset位置, 并将jsr的下一条指令地址压入栈顶  |
| 0xa9   | ret    | 返回至本地变量指定的index的指令位置(一般与jsr或jsr_w联合使用) |
| 0xc8   | goto_w | 无条件跳转(宽索引)                                           |
| 0xc9   | jsr_w  | 跳转至指定的32位offset位置, 并将jsr_w的下一条指令地址压入栈顶 |

- 对于boolean类型、byte类型、char类型和short类型的条件分支比较操作，都使用int类型的比较指令来完成
- 对于long类型、float类型和double类型的条件分支比较操作，则会先执行相应类型的比较运算指令（dcmpg、dcmpl、fcmpg、fcmpl、lcmp），运算指令会返回一个整型值到操作数栈中，随后再执行int类型的条件分支比较操作来完成整个分支跳转

# 方法调用和返回指令

| 字节码 | 助记符          | 含义                                                         |
| ------ | --------------- | ------------------------------------------------------------ |
| 0xb6   | invokevirtual   | 调用实例方法，根据对象的实际类型进行分派（虚方法分派）       |
| 0xb7   | invokespecial   | 调用超类构建方法, 实例初始化方法, 私有方法                   |
| 0xb8   | invokestatic    | 调用静态方法                                                 |
| 0xb9   | invokeinterface | 调用接口方法，它会在运行时搜索一个实现了这个接口方法的对象，找出适合的方法进行调用。 |
| 0xba   | invokedynamic   | 调用动态方法                                                 |

| 字节码 | 助记符  | 含义                   |
| ------ | ------- | ---------------------- |
| 0xac   | ireturn | 从当前方法返回int      |
| 0xad   | lreturn | 从当前方法返回long     |
| 0xae   | freturn | 从当前方法返回float    |
| 0xaf   | dreturn | 从当前方法返回double   |
| 0xb0   | areturn | 从当前方法返回对象引用 |
| 0xb1   | return  | 从当前方法返回void     |

# 异常处理指令

| 字节码 | 助记符 | 含义             |
| ------ | ------ | ---------------- |
| 0xbf   | athrow | 将栈顶的异常抛出 |

# 同步指令

Java虚拟机可以支持方法级的同步和方法内部一段指令序列的同步，这两种同步结构都是使用管程（Monitor，锁）来实现的。

方法级的同步是隐式的，无须通过字节码指令来控制，它实现在方法调用和返回操作之中。虚拟机可以从方法常量池中的方法表结构中的ACC_SYNCHRONIZED访问标志得知一个方法是否被声明为同步方法。当方法调用时，调用指令将会检查方法的ACC_SYNCHRONIZED访问标志是否被设置，如果设置了，执行线程就要求先成功持有管程，然后才能执行方法，最后当方法完成（无论是正常完成还是非正常完成）时释放管程。在方法执行期间，执行线程持有了管程，其他任何线程都无法再获取到同一个管程。如果一个同步方法执行期间抛出了异常，并且在方法内部无法处理此异常，那这个同步方法所持有的管程将在异常抛到同步方法边界之外时自动释放。

| 字节码 | 助记符       | 含义                                                         |
| ------ | ------------ | ------------------------------------------------------------ |
| 0xc2   | monitorenter | 获得对象的锁, 用于同步方法或同步块，会消耗操作数栈上的一个引用类型的元素 |
| 0xc3   | monitorexit  | 释放对象的锁, 用于同步方法或同步块，会消耗操作数栈上的一个引用类型的元素 |

# 扩展本地变量宽度

| 字节码 | 助记符 | 含义               |
| ------ | ------ | ------------------ |
| 0xc4   | wide   | 扩展本地变量的宽度 |

# 参考

- 《深入理解Java虚拟机》
- [https://segmentfault.com/a/1190000008722128](https://segmentfault.com/a/1190000008722128)